<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8" />
    <title>Website Text Clustering Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        brand: {
                            500: "#22c55e",
                            600: "#16a34a",
                        },
                    },
                },
            },
        };
    </script>

    <style>
        * {
            transition: background-color 0.25s ease,
                        color 0.25s ease,
                        border-color 0.25s ease;
        }
    </style>
</head>

<body class="min-h-screen bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 font-sans">

    <!-- Background Glow -->
    <div class="pointer-events-none fixed inset-0 -z-10 opacity-40">
        <div class="absolute -top-48 -left-32 h-80 w-80 rounded-full bg-emerald-400 blur-3xl"></div>
        <div class="absolute -bottom-56 -right-40 h-96 w-96 rounded-full bg-cyan-400 blur-3xl"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-10">

        <!-- HEADER -->
        <header class="mb-10 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-6">

            <div>
                <p class="text-xs uppercase tracking-[0.2em] text-emerald-500 dark:text-emerald-400/80">
                    Website Text Clustering
                </p>

                <h1 class="text-3xl sm:text-4xl font-semibold tracking-tight">
                    CSV ‚Üí <span class="text-emerald-600 dark:text-emerald-400">Topic Analysis</span> Dashboard
                </h1>

                <p class="text-sm text-slate-700 dark:text-slate-400 max-w-2xl mt-1">
                    Automatic clustering, summaries, UMAP, sentiment analysis,
                    word clouds & PDF reporting.
                </p>
            </div>

            <!-- RIGHT SIDE BADGE + DARK MODE -->
            <div class="grid items-center gap-4">

                <!-- Glowing badge -->
                <span class="inline-flex items-center gap-2 rounded-full border 
                    border-emerald-500/40 bg-emerald-500/10 px-3 py-1 text-xs font-medium
                    text-emerald-600 dark:text-emerald-200 shadow-sm shadow-emerald-500/30">
                    <span class="h-2.5 w-2.5 rounded-full bg-emerald-500 dark:bg-emerald-400 
                        shadow-[0_0_14px_rgba(34,197,94,1)] animate-pulse"></span>
                    Hackathon Prototype
                </span>

                <!-- iOS Toggle -->
                <label class="relative inline-flex items-center cursor-pointer select-none">
                    <input type="checkbox" id="darkToggle" class="sr-only peer" />

                    <div class="w-14 h-7 bg-gray-300 peer-focus:outline-none rounded-full
                        peer dark:bg-slate-700 
                        after:content-[''] after:absolute after:top-0.5 after:left-0.5 
                        after:bg-white after:rounded-full after:h-6 after:w-6 
                        after:transition-all
                        peer-checked:after:translate-x-7 peer-checked:bg-brand-600"></div>

                    <span class="ml-3 text-sm font-medium text-slate-700 dark:text-slate-300">
                        Dark Mode
                    </span>
                </label>
            </div>
        </header>

        <!-- UPLOAD SECTION -->
        <section class="rounded-2xl border border-slate-300 dark:border-slate-800 
                bg-white dark:bg-slate-900/70 p-6 shadow-xl">
            <form id="uploadForm" class="space-y-5">

                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                    <div>
                        <label class="text-sm font-medium">Upload CSV or XLSX File</label>
                        <p class="text-xs text-slate-600 dark:text-slate-400">
                            Sent to <span class="font-mono">/api/analyze/</span>
                        </p>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-3">
                        <label for="csvInput"
                            class="cursor-pointer border border-slate-300 dark:border-slate-700 
                            bg-slate-100 dark:bg-slate-900/80 px-4 py-2 rounded-xl
                            hover:bg-slate-200 dark:hover:bg-slate-800 transition">
                            üìÅ Choose File
                        </label>
                        <input id="csvInput" type="file" accept=".csv,.xlsx" class="hidden" />

                        <button id="uploadBtn" type="submit"
                            class="px-4 py-2 rounded-xl bg-brand-500 text-white 
                            font-semibold hover:bg-brand-600 transition">
                            Analyze
                        </button>

                        <button id="downloadPdfBtn" disabled
                            class="px-4 py-2 rounded-xl bg-slate-400 dark:bg-slate-700 
                            text-white opacity-40">
                            Download PDF
                        </button>
                    </div>
                </div>

                <p id="fileName" class="text-[11px] text-slate-600 dark:text-slate-500"></p>
                <p id="status" class="text-[11px] text-slate-600 dark:text-slate-500"></p>
            </form>
        </section>

        <!-- MAIN CHART SECTION -->
        <section
            class="mt-8 rounded-2xl border border-slate-300 dark:border-slate-800 
            bg-white dark:bg-slate-900/70 p-6 shadow-xl flex flex-col items-center justify-center min-h-[300px]">

            <div id="placeholder" class="text-center space-y-3">
                <div class="h-12 w-12 rounded-full border border-dashed border-slate-400 
                        dark:border-slate-700 flex items-center justify-center">
                    <span class="text-slate-500 dark:text-slate-400 text-xl">üìä</span>
                </div>
                <p class="text-slate-700 dark:text-slate-300">Upload a CSV to begin analysis.</p>
            </div>

            <!-- PROGRESS BAR -->
            <div id="progressWrapper" class="hidden w-full max-w-md mt-4">
                <div class="w-full bg-slate-800 rounded-full h-3 overflow-hidden">
                    <div id="progressBar" class="h-3 bg-emerald-500 w-0 transition-all duration-300"></div>
                </div>
                <p id="progressText" class="text-xs text-slate-400 mt-1 text-center">Starting...</p>
            </div>

            <img id="chartImage"
                class="hidden max-h-[420px] w-auto rounded-xl border border-slate-300 dark:border-slate-800 shadow-xl" />
        </section>

        <!-- ALL CHARTS GRID -->
        <section class="mt-8 rounded-2xl border border-slate-300 dark:border-slate-800 
                        bg-white dark:bg-slate-900/70 p-6 shadow-xl">
            <h2 class="text-sm font-semibold mb-3">All Topic Visualizations</h2>
            <div id="chartsEmpty" class="text-[11px] text-slate-600 dark:text-slate-500">No charts yet.</div>
            <div id="chartsContainer" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
        </section>

        <!-- SUMMARY PANELS -->
        <section class="mt-10 space-y-6">

            <!-- DATASET SUMMARY -->
            <div class="rounded-2xl border border-slate-300 dark:border-slate-800 
                        bg-white dark:bg-slate-900/70 p-5 shadow-xl">
                        <button class="flex justify-between w-full summary-toggle" data-target="datasetSummary">
                    <span class="text-sm font-semibold text-emerald-600 dark:text-emerald-300">Dataset Summary</span>
                    <span class="text-xs text-slate-600 dark:text-slate-400">‚ñº</span>
                </button>
                <div id="datasetSummary" class="hidden mt-3 text-sm space-y-2"></div>
            </div>

            <!-- SENTIMENT SUMMARY -->
            <div class="rounded-2xl border border-slate-300 dark:border-slate-800 
                        bg-white dark:bg-slate-900/70 p-5 shadow-xl">
                        <button class="flex justify-between w-full summary-toggle" data-target="sentimentSummary">
                    <span class="text-sm font-semibold text-emerald-600 dark:text-emerald-300">Overall Sentiment</span>
                    <span class="text-xs text-slate-600 dark:text-slate-400">‚ñº</span>
                </button>
                <div id="sentimentSummary" class="hidden mt-3 text-sm space-y-2"></div>
            </div>

            <!-- TOPIC CARDS -->
            <div id="topicCardsContainer" class="space-y-6"></div>
        </section>

    </div>

    <script src="/static/app.js"></script>
</body>
</html>